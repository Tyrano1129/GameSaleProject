<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="common_header">
    <!-- 공통 -->
    <meta charset="UTF-8">
    <title>더조은 게임즈</title>
    <link rel="stylesheet" href="/css/admin.css" />
    <link rel="stylesheet" href="/css/modal.css">
    <script defer src="/js/admin.js"></script>
</head>
<body>
<div th:fragment="admin" class="admincontainer">
    <nav th:fragment="adminnave" class="adminnav">
        <header>
            <h3><a href="/admin">더조은 게임즈</a></h3>
        </header>
        <div class="adminmenu">
            <button id="user">유저관리</button>
            <button id="game">게임관리</button>
            <button id="qna">문의관리</button>
            <button id="refund">환불관리</button>
            <button id="review">리뷰관리</button>
            <a href="/">홈으로</a>
        </div>
    </nav>
    <main class="adminmain">
        <div class="refundcontainer">
            <h1>환불 관리 리스트</h1>
            <div class="refundtable">
                <table class="refundlist">
                    <tr>
                        <th>번호</th>
                        <th>결제명</th>
                        <th>환불사유</th>
                        <th>환불신청날짜</th>
                        <th>환불여부</th>
                        <th>환불버튼</th>
                    </tr>
                    <tr th:each="list : ${refundList}">
                        <td>
                            <p th:text="${list.refundId}">123</p>
                        </td>
                        <td>
                            <p th:text="${list.payment.gameName}">132</p>
                        </td>
                        <td>
                            <p th:text="${list.refundReason}">122</p>
                        </td>
                        <td>
                            <p th:text="${list.refundAplctdate}">123</p>
                        </td>
                        <td>
                            <p th:text="${list.refundWhether}"></p>
                        </td>
                        <td>
                            <button th:data-delete="${list.refundId}" onclick="refundCheck('환불 처리 하시겠습니까?','paymentDelete',this)">환불</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="usercontainer">
            <h1>유저 관리 리스트</h1>
            <form action="/admin" method="post" >
                <div class="userButton">
                    <input type="button" onclick="refundCheck('유저를 수정 하시겠습니까?','userupdate')" value="수정하기" />
                </div>
                <table class="userList">
                    <tr>
                        <th>번호</th>
                        <th>이메일</th>
                        <th>닉네임</th>
                        <th>직책</th>
                        <th>전화번호</th>
                        <th>삭제</th>
                    </tr>
                    <tr th:each="list : ${userList}">
                        <td>
                            <p class="userid" th:text="${list.id}">123</p>
                        </td>
                        <td>
                            <p th:text="${list.username}">123</p>
                        </td>
                        <td>
                            <p th:text="${list.userNickname}">123</p>
                        </td>
                        <td>
                            <select name="roleselect" id="roleselect" th:data-id="${list.id}" >
                                <option value="MANAGER" th:selected="${list.userRole.toString()} == 'ROLE_MANAGER'">매니저</option>
                                <option value="USER" th:selected="${list.userRole.toString()} == 'ROLE_USER'" >유저</option>
                            </select>
                        </td>
                        <td>
                            <p th:text="${list.userPhone}">123</p>
                        </td>
                        <td>
                            <input type="button" th:data-delete="${list.id}" onclick="refundCheck('유저를 삭제 하시겠습니까?','userdelete',this)" value="삭제">
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <div class="qnacontainer">
            <h1>문의 관리 리스트</h1>
            <div class="qnatable">
                <table class="qnalist">
                    <tr>
                        <th>번호</th>
                        <th>닉네임</th>
                        <th>문의제목</th>
                        <th>답변여부</th>
                        <th>답변자</th>
                    </tr>
                    <tr th:each="list : ${qnaList}">
                        <td>
                            <p th:text="${list.qnaId}">123</p>
                        </td>
                        <td>
                            <p th:text="${list.users.userNickname}">132</p>
                        </td>
                        <td>
                            <a th:text="${list.qnaTitle}">122</a>
                        </td>
                        <td>
                            <p th:text="${list.qnaIsAnswered}">123</p>
                        </td>
                        <td>
                            <p th:text="${list.qnaRespondent}">123</p>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="gamecontainer">
            <h1>게임 관리 리스트</h1>
            <div class="gameButton">
                <input type="button" onclick="location.href='/admin/gameForm'" value="추가하기" />
            </div>
            <table class="gameList">
                <tr>
                    <th>번호</th>
                    <th>이름</th>
                    <th>개발자사</th>
                    <th>가격</th>
                    <th>발매일</th>
                    <th>장르</th>
                    <th>삭제</th>
                </tr>
                <tr th:each="list : ${gameList}">
                    <td>
                        <p th:text="${list.steamAppid}">1</p>
                    </td>
                    <td>
                        <a th:href="@{/admin/gameUpdateForm(id=${list.steamAppid})}" th:text="${list.name}">그러게 무슨게임이지?</a>
                    </td>
                    <td>
                        <p th:text="${list.developers}">뭐였더라</p>
                    </td>
                    <td>
                        <p th:text="${list.getFormattedPrice()}">40000원</p>
                    </td>
                    <td>
                        <p th:text="${list.releaseDate}">2023-01-01</p>
                    </td>
                    <td>
                        <p th:text="${list.genres}">액션</p>
                    </td>
                    <td>
                        <button class="btn delete" th:data-delete="${list.steamAppid}" onclick="refundCheck('게임을 삭제 하시겠습니까?','gamedelete',this)">삭제</button>
                    </td>
                </tr>
            </table>
        </div>

    </main>
</div>
<div th:fragment="modal" class="modal">
    <div class="main">
        <p class="subject">환불을 하겠습니까?</p>
        <div class="btn-list">
            <button onclick="refundAccept()">확인</button>
            <button onclick="refundCancel()">취소</button>
        </div>
    </div>
</div>
</body>
</html>